<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TEX - Discover</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #121212;
      color: #fff;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 50px;
      background-color: #1a1a1a;
      border-bottom: 1px solid #333;
    }
    header .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #ff4d4d;
    }
    header nav a {
      color: #fff;
      text-decoration: none;
      margin-left: 20px;
    }
    header nav a:hover {
      color: #ff4d4d;
    }
    main {
      padding: 40px 50px;
    }
    .market-table h1 {
      color: #ff4d4d;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #1e1e1e;
    }
    th, td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #333;
    }
    th {
      color: #ff4d4d;
    }
    td {
      color: #fff;
    }
    tr:hover {
      background-color: #2a2a2a;
    }
    .trade-button {
      padding: 8px 12px;
      background-color: #ff4d4d;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .trade-button:hover {
      background-color: #ff1a1a;
    }
    footer {
      text-align: center;
      padding: 20px;
      border-top: 1px solid #333;
      margin-top: 50px;
      color: #888;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">TEX</div>
    <nav>
      <a href="#">Home</a>
      <a href="#">Discover</a>
      <a href="#">About</a>
    </nav>
  </header>

  <main>
    <section class="market-table">
      <h1>Discover</h1>
      <table>
        <thead>
          <tr>
            <th>Token</th>
            <th>Price (USD)</th>
            <th>24h Change</th>
            <th>Market Cap</th>
            <th>Trade</th>
          </tr>
        </thead>
        <tbody id="token-body">
          <!-- Populated by JS -->
        </tbody>
      </table>
    </section>
  </main>

  <footer>
    &copy; 2025 TEX Exchange
  </footer>

  <script>
    const tokenBody = document.getElementById('token-body');

    const SPEC_MINT = "28epFLHUSyU9y5tYdXmzT2YK3ozpFkAZvUqC9f9Naray";
    const SOL_MINT = "So11111111111111111111111111111111111111112";

    async function fetchPrice(mint) {
      try {
        const res = await fetch(`https://lite-api.jup.ag/price/v3?ids=${mint}`);
        if (!res.ok) throw new Error("API error");
        const json = await res.json();
        const data = json.data[mint];
        if (!data || !data.price) throw new Error("No price found");
        return data.price;
      } catch (e) {
        console.error(`Price fetch failed for ${mint}:`, e);
        return null;
      }
    }

    async function loadToken() {
      try {
        const [specSol, solUsd] = await Promise.all([
          fetchPrice(SPEC_MINT),
          fetchPrice(SOL_MINT)
        ]);

        let priceUsd = "N/A";
        if (specSol && solUsd) priceUsd = (specSol * solUsd).toFixed(6);

        const marketCap = priceUsd === "N/A" ? "N/A" : `$${(priceUsd * 1_000_000_000).toLocaleString()}`; // assuming 1B supply
        const change24h = "N/A";

        const row = document.createElement('tr');
        row.innerHTML = `
          <td>$SPEC</td>
          <td>${priceUsd === "N/A" ? "N/A" : `$${priceUsd}`}</td>
          <td>${change24h}</td>
          <td>${marketCap}</td>
          <td><a href="https://raydium.io/launchpad/token/?mint=${SPEC_MINT}" target="_blank"><button class="trade-button">Trade</button></a></td>
        `;
        tokenBody.appendChild(row);
      } catch (e) {
        console.error("Load token failed:", e);
      }
    }

    loadToken();
  </script>
</body>
</html>
